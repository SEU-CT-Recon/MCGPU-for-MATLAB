# MCGPU for MATLAB

This repository offers tools and resources for using MATLAB to call and interact with the MCGPU program.

## Introduction 

Welcome to the MCGPU for MATLAB repository! This repository contains tools for using MATLAB to call and interact with the MCGPU program. 

The MC-GPU simulator was created, and is actively under development, at the [FDA](https://www.fda.gov)/[CDRH](https://www.fda.gov/Medical-Devices)/[OSEL](https://www.fda.gov/about-fda/cdrh-offices/office-science-and-engineering-laboratories)/[DIDSR](https://www.fda.gov/about-fda/cdrh-offices/division-imaging-diagnostics-and-software-reliability). Multiple versions of MC-GPU have been released to reproduce different clinical applications of ionizing radiation. The source code, instructions, and publications for the different versions can be found in the following repositories:  - [MCGPU v1.3](https://github.com/DIDSR/MCGPU): for projection radiography and cone-beam computed tomography.  - [VICTRE_MCGPU](https://github.com/DIDSR/VICTRE_MCGPU): for mammography and digital breast tomosynthesis (DBT).  - [MCGPU-PET](https://github.com/DIDSR/MCGPU-PET/): for Positron Emission Tomography (PET).

Detailed documentation for the individual functions and variables implemented in the MCGPU code is available. This documentation is automatically generated by Doxygen, parsing the comments in the MCGPU source code. You can access the complete documentation at the following GitHub page: [MCGPU Documentation](https://didsr.github.io/MCGPU/wiki/html/index.html) .

## Getting Started 

To get started with using MCGPU from MATLAB, please refer to the example script located at: ``` ./scripts/Scatter_simulation_demo.mlx ```

This script provides a demonstration of how to set up and run a basic scatter simulation using the MCGPU tool within MATLAB.

Unlike [MCGPULite](https://github.com/SEU-CT-Recon/MCGPULite), where the simulation results are automatically saved locally, MATLAB provides you with the flexibility to decide when and how to save the results. This means that: 

- The output of MCGPU will not be automatically saved to your local storage. 
- You will need to explicitly write code within MATLAB to save the results, allowing you to save them in your preferred format and location. 
- There is no automatic generation of `.txt` format files for the results. You can choose to save the data in MATLAB-specific formats (`.mat`) or any other format you require.

This added flexibility allows for more controlled and customized handling of simulation outputs directly from within MATLAB.	

## 运行说明

示例脚本位于 ``` ./scripts/Scatter_simulation_demo.mlx ```，首先是要读取`.in`文件，若使用的是`MCGPU_MATLAB_sample.in`，`MATERIAL FILE LIST`模块中各个材料文件的路径需要改成正确的路径，其余的文件路径可通过代码修改。

MCGPU 默认输出primary信号、康普顿散射、雷瑞散射以及多重散射，需要把后三者相加才能获取完整的散射信号，示例代码都在 ``` ./scripts/Scatter_simulation_demo.mlx ```中给出。

## Authors 

This MATLAB interface for MCGPU is developed and maintained by: 

-  [Tianling Lyu](https://github.com/ltldlzltl). 
-  [Wenhui Huang](https://github.com/IIIIIsak)
